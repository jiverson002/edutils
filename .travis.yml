# Tell Travis the project language.
language: c

# Route to the container-based infrastructure for a faster build.
sudo: false

# Branch whitelist.
branches:
  only:
    - master

# Override default install.
install: autoreconf --install

# Configure job stages.
jobs:
  include:
    - stage: test
      compiler:
        - clang
        - gcc
      os:
        - linux
        - osx
      script:
        - ./configure
        - make
        - make check
    - stage: tarball
      compiler:
        - clang
        - gcc
      os:
        - linux
        - osx
      script:
        - ./configure
        - make
        - make dist
        - mv edutils-*.tar.gz ~
        - cd
        - tar -xzf edutils-*.tar.gz
        - cd edutils-*
        - ./configure
        - make
        - make check
