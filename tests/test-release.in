#!/bin/bash
# @configure_input@

# https://stackoverflow.com/questions/1378274/in-a-bash-script-how-can-i-exit-the-entire-script-if-a-certain-condition-occurs
yell() { echo "$0: $*" >&2; }
die() { yell "$*"; exit 1; }
try() { "$@" || die "cannot $*"; }

# get path to the project root directory
srcdir="@abs_top_srcdir@"

# get path to test directory (contains this script)
testsdir="@abs_builddir@"

# get path to the release dir
progdir=$srcdir/tests/release

# check that required files exist with correct permissions
try test -r $progdir/funcs
try test -x $srcdir/dep/shunit2/shunit2

# HACK: req'd since shunit2 does not appear to find dynamically created
# functions.
suite() {
  # load test functions
  . $progdir/funcs
}

# initiate the test runner
. $srcdir/dep/shunit2/shunit2
